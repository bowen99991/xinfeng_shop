"use strict";(self["webpackChunkxinfeng_shop"]=self["webpackChunkxinfeng_shop"]||[]).push([[837],{837:function(t,s,o){o.r(s),o.d(s,{default:function(){return l}});o(560);var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"detail-box"},[s("MyNavBar",{attrs:{title:"商品详情"}}),t.goodsInfo?t._e():s("van-skeleton",{attrs:{row:8,title:"","avatar-size":"120px","avatar-shape":"square"}}),t.goodsInfo?s("div",{staticClass:"info"},[s("van-image",{attrs:{"lazy-load":"",src:t.suffix(t.goodsInfo.goodsCoverImg)}}),s("div",{staticClass:"desc"},[s("h3",{staticClass:"title"},[t._v(t._s(t.goodsInfo.goodsName))]),s("p",{staticClass:"tag"},[t._v(t._s(t.goodsInfo.goodsIntro))]),s("p",{staticClass:"price"},[t._v("¥ "+t._s(t.goodsInfo.sellingPrice))])]),t._m(0),s("div",{staticClass:"content",domProps:{innerHTML:t._s(t.goodsInfo.goodsDetailContent)}})],1):t._e(),t.goodsInfo?s("van-goods-action",{staticClass:"center-x",staticStyle:{"max-width":"540px"}},[s("van-goods-action-icon",{attrs:{icon:"chat-o",text:"客服"}}),0===t.badge?s("van-goods-action-icon",{attrs:{icon:"cart-o",text:"购物车"},on:{click:function(s){return t.$router.push("/cart")}}}):s("van-goods-action-icon",{attrs:{icon:"cart-o",text:"购物车",badge:t.badge},on:{click:function(s){return t.$router.push("/cart")}}}),s("van-goods-action-button",{attrs:{color:"linear-gradient(90deg,#6bd8d8,#1baeae)",text:"加入购物车"},on:{click:function(s){return t.handle("add")}}}),s("van-goods-action-button",{attrs:{color:"linear-gradient(90deg,#0dc3c3,#098888)",text:"立即购买"},on:{click:function(s){return t.handle("buy")}}})],1):t._e()],1)},n=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"tab"},[s("a",{attrs:{href:"javascript:;"}},[t._v("概述")]),s("span",[t._v("|")]),s("a",{attrs:{href:"javascript:;"}},[t._v("参数")]),s("span",[t._v("|")]),s("a",{attrs:{href:"javascript:;"}},[t._v("安装服务")]),s("span",[t._v("|")]),s("a",{attrs:{href:"javascript:;"}},[t._v("常见问题")])])}],i=o(629),e={name:"Detail",props:[],async created(){try{let{resultCode:t,data:s}=await this.$API.queryGoodsInfo(this.goodsId);if(200===+t)return void(this.goodsInfo=s);this.$toast.fail("网络繁忙,请稍后再试")}catch(t){}},data(){return{goodsId:this.$route.params.id,goodsInfo:null}},components:{},computed:{...(0,i.rn)("cart",["list"]),badge(){let t=this.list;return t?t.reduce(((t,s)=>t+ +s.goodsCount),0):0}},methods:{...(0,i.nv)(["cart/addListAsync","cart/updateListAsync"]),async handle(t){let s=!1,o=!1;if(o=this.list.find((t=>+t.goodsId===+this.goodsId)),o)if("buy"===t)s=!0;else{if(o.goodsCount>=5)return void this.$toast.fail("最多添加5件!");s=await this["cart/updateListAsync"]({cartItemId:o.cartItemId,goodsCount:+o.goodsCount+1})}else s=await this["cart/addListAsync"]({goodsId:this.goodsId,goodsCount:1});s&&"buy"===t&&this.$router.push("/cart")}}},r=e,d=o(1001),c=(0,d.Z)(r,a,n,!1,null,"004911d9",null),l=c.exports}}]);